!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("java-stack-parser",[],t):"object"==typeof exports?exports["java-stack-parser"]=t():e["java-stack-parser"]=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=/([\w\d\.]*exception)\:\s*(.*)$/i,o=/((([\d\w]*\.)*[\d\w]*)\.)?([\d\w\$]*)\.([\d\w\$]*)\(([\d\w\.\s]*)(\:(\d*))?\)/,i=t.StackPackage=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n(this,e),!t||0===t.trim().length)throw new Error("Cannot create stack package: name is not defined");if(!(a&&a instanceof Array))throw new Error("Cannot create stack package: aliases is not defined or of a wrong type");this.name=t,this.aliases=a,this.isVendor=r,String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.indexOf(e)})}return a(e,[{key:"equals",value:function(e){if(!e)return!1;if(e.name===this.name)return!0;for(var t=0;t<this.aliases.length;t++)if(this.aliases[t]===e.name||e.name.startsWith(this.aliases[t]))return!0;return!1}}]),e}(),s=t.StackLine=function u(e,t,a,r,o){if(n(this,u),!(e&&e instanceof i))throw new Error("Cannot create stack line: stack package is null or of a wrong type");this.stackPackage=e,this.javaClass=t||"Unknown",this.method=a||"Unknown",this.source=r||"Unknown",this.line=o?parseInt(o,10):-1},c=t.StackGroup=function(){function e(t){if(n(this,e),!(t&&t instanceof i))throw new Error("Cannot create stack group: stack package is null or of a wrong type");this.stackPackage=t,this.lines=[]}return a(e,[{key:"addLine",value:function(e){e instanceof s&&this.lines.push(e)}},{key:"addException",value:function(e,t){this.exception={exception:e,message:t}}}]),e}();t.Stack=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.groups=[],this.vendorPackages=[];var a=!0,r=!1,o=void 0;try{for(var s,c=Object.keys(t)[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;this.vendorPackages.push(new i(u,t[u],(!0)))}}catch(f){r=!0,o=f}finally{try{!a&&c["return"]&&c["return"]()}finally{if(r)throw o}}}return a(e,[{key:"parse",value:function(e){var t=this;this.groups=[];var n=null,a=e.split("\n");a.forEach(function(e){null===n&&(n=e.trim().match(r));var a=e.trim().match(o);if(null!==a){var u=new i(a[2]||"Unknown");for(var f in t.vendorPackages)if(t.vendorPackages[f].equals(u)){u=t.vendorPackages[f];break}var l=new s(u,a[4],a[5],a[6],a[8]);0===t.groups.length&&t.groups.push(new c(u));var p=t.groups[t.groups.length-1];p.stackPackage.equals(u)||(p=new c(u),t.groups.push(p)),p.addLine(l),null!==n&&(p.addException(n[1],n[2]),n=null)}})}}]),e}()}])});
//# sourceMappingURL=java-stack-parser.min.js.map